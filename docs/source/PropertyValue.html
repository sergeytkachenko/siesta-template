<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*

Siesta 4.2.2
Copyright(c) 2009-2016 Bryntum AB
http://bryntum.com/contact
http://bryntum.com/products/siesta/license

*/
Class('Ariadne.ExtJSComponentQueryFinder.Identifier.PropertyValue', {
    
    isa         : Ariadne.QueryFinder.Identifier,
    
    does        : [
        Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper,
        Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper
    ],
    
    has         : {
        // an array of attribute names, which can be used for matching
        properties          : function () {
            return [
                'name',         // form fields
                'text',         // menu items, buttons
                'dataIndex',    // Column component
                'iconCls',      // button/menuitem
                'type',         // Panel header tools
                'title',        // identifying panels, tab panels headers
//                'cls',        // Cmp, TODO discuss
                'inputType',
                'boxLabel',
                'fieldLabel'
            ]
        }
    },
    
    methods : {
        
        initialize : function (cfg) {
            this.properties     = this.mergeArrayAttributeFromClassHierarchy('properties', cfg)
        },
        
        
        ignoreProperty : function (target, property) {
            return this.valueIsAutoGeneratedByComponent(target, target[ property ])
        },
        
        
        identify : function (target, root, maze) {
            var Ext             = this.finder.Ext
            var properties      = this.properties
            var segments        = []
            
            var xtype           = this.getComponentXType(target)
            
            for (var i = 0; i &lt; properties.length; i++) {
                var property    = properties[ i ]
                var value       = target[ property ]
                
                if (
                    value &amp;&amp; typeof value === 'string' &amp;&amp; !(
                        this.ignoreProperty(target, property) ||
                    
                        // ignore the &quot;inputType&quot; for sliders which is always a &quot;text&quot;
                        (property == 'inputType' &amp;&amp; Ext.slider &amp;&amp; Ext.slider.Multi &amp;&amp; (target instanceof Ext.slider.Multi)) ||
                        
                        (property == 'inputType' &amp;&amp; Ext.form &amp;&amp; Ext.form.field &amp;&amp; Ext.form.field.ComboBox &amp;&amp; (target instanceof Ext.form.field.ComboBox)) ||

                        // Some Ext Components have an empty title/text - ignore
                        (value == '&amp;#160;')
                    )
                ) {
                    segments.push({
                        query       : xtype + '[' + property + '=' + this.escapeCQSelector(value) + ']',
                        leading     : true
                    })
                }
            }
                    
            return segments
        }
    }
});
</pre>
</body>
</html>
